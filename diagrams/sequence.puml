@startuml
actor User
participant "Client UI" as Client
participant "Server" as Server
participant "Email Service" as EmailService
database "Database" as Database

User -> Client: Requests access
activate Client
Client -> Server: Requests Sign In Token
activate Server
Server -> Server: Generates Sign In Token
Server -> EmailService: Sends Email with Token
activate EmailService
EmailService --> Server: Confirms Email Sent
deactivate EmailService
Server -> Client: Confirms Magic Link Sent
deactivate Server
Client -> User: Displays confirmation message and link
deactivate Client

User -> Client: Clicks the link received via email
activate Client
Client -> Server: Sends Sign In Token
activate Server
Server -> Server: Validates Sign In Token
Server -> Server: Extracts Email from Token ID
Server -> Database: Creates User in Database
activate Database
Database --> Server: User Created
deactivate Database
Server -> Server: Generates Auth Token
Server --> Client: Confirms Access
deactivate Server
Client -> User: Access Confirmed
deactivate Client

@enduml
